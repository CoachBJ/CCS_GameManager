<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0f14" />
  <meta name="description" content="CCS Game Manager — fast, offline scoreboard with timeout and scoring tools." />

  <!-- PWA -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="apple-touch-icon" href="./icon-180.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- Styles -->
  <link rel="stylesheet" href="./style.css" />

  <title>CCS Game Manager</title>

  <script>
    // Service worker (works under /CCS_GameManager/)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js', { scope: './' });
      });
    }
  </script>
</head>
<body>
  <noscript>This app needs JavaScript enabled.</noscript>

  <!-- Sticky top bar with period + clock controls -->
  <header class="appbar">
    <div class="period">
      <label for="period">Period</label>
      <select id="period" aria-label="Period">
        <option>1</option><option>2</option><option>3</option><option>4</option><option>OT</option>
      </select>
    </div>

    <div class="clock" aria-live="polite">
      <span id="clockDisplay">12:00</span>
    </div>

    <div class="clock-ctrl" role="group" aria-label="Clock controls">
      <button id="startBtn" class="btn primary" aria-label="Start clock">▶︎</button>
      <button id="pauseBtn" class="btn" aria-label="Pause clock">❚❚</button>
      <button id="resetBtn" class="btn" aria-label="Reset clock">↺</button>
    </div>
  </header>

  <main class="layout">
    <!-- HOME -->
    <section class="team-row" data-team="home">
      <div class="team-left">
        <h2 id="homeName" class="team-name" contenteditable="true" spellcheck="false">HOME</h2>
        <div class="score-wrap">
          <button class="btn ghost minus" data-action="minus" data-team="home" aria-label="Decrease home score">−</button>
          <div id="homeScore" class="score" aria-live="polite">0</div>
          <div class="tos" role="group" aria-label="Home timeouts">
            <input type="checkbox" id="hto1" /><label for="hto1" title="Home TO 1"></label>
            <input type="checkbox" id="hto2" /><label for="hto2" title="Home TO 2"></label>
            <input type="checkbox" id="hto3" /><label for="hto3" title="Home TO 3"></label>
          </div>
        </div>
      </div>
      <div class="quick-scores" role="group" aria-label="Home quick scores">
        <button class="btn score" data-team="home" data-points="1">+1</button>
        <button class="btn score" data-team="home" data-points="2">+2</button>
        <button class="btn score" data-team="home" data-points="3">+3</button>
        <button class="btn score" data-team="home" data-points="6">+6</button>
        <button class="btn score" data-team="home" data-points="7">+7</button>
        <button class="btn score" data-team="home" data-points="8">+8</button>
      </div>
    </section>

    <!-- AWAY -->
    <section class="team-row" data-team="away">
      <div class="team-left">
        <h2 id="awayName" class="team-name" contenteditable="true" spellcheck="false">AWAY</h2>
        <div class="score-wrap">
          <button class="btn ghost minus" data-action="minus" data-team="away" aria-label="Decrease away score">−</button>
          <div id="awayScore" class="score" aria-live="polite">0</div>
          <div class="tos" role="group" aria-label="Away timeouts">
            <input type="checkbox" id="ato1" /><label for="ato1" title="Away TO 1"></label>
            <input type="checkbox" id="ato2" /><label for="ato2" title="Away TO 2"></label>
            <input type="checkbox" id="ato3" /><label for="ato3" title="Away TO 3"></label>
          </div>
        </div>
      </div>
      <div class="quick-scores" role="group" aria-label="Away quick scores">
        <button class="btn score" data-team="away" data-points="1">+1</button>
        <button class="btn score" data-team="away" data-points="2">+2</button>
        <button class="btn score" data-team="away" data-points="3">+3</button>
        <button class="btn score" data-team="away" data-points="6">+6</button>
        <button class="btn score" data-team="away" data-points="7">+7</button>
        <button class="btn score" data-team="away" data-points="8">+8</button>
      </div>
    </section>

    <!-- Utils -->
    <section class="row utils">
      <div class="possession" role="group" aria-label="Possession">
        <button id="posHome" class="btn toggle on">⬤ HOME</button>
        <button id="posAway" class="btn toggle">○ AWAY</button>
      </div>
      <button id="undoBtn" class="btn ghost">Undo last</button>
    </section>

    <!-- Quick time set -->
<section class="row quick-time">
  <div class="time-presets" role="group" aria-label="Quick set time">
    <button class="btn tset" data-time="12:00">12:00</button>
    <button class="btn tset" data-time="10:00">10:00</button>
    <button class="btn tset" data-time="08:00">08:00</button>
    <button class="btn tset" data-time="02:00">02:00</button>
  </div>
  <div class="time-slider">
    <input type="range" id="timeSlider" min="0" max="720" step="1" value="720" />
    <span id="timeSliderLabel">12:00</span>
    <button id="useClockBtn" class="btn ghost">Use Clock</button>
  </div>
</section>

    <!-- Game log -->
    <section id="log" class="log" aria-live="polite" aria-label="Game log"></section>

    <!-- Advanced calculators (below main setup) -->
    <section class="advanced">
      <details open class="panel">
        <summary>Timeout Planner</summary>
        <div class="grid two">
          <div>
            <label class="lbl">Mode</label>
            <div class="btn-group">
              <button id="modeDefense" class="btn toggle on">We’re on DEFENSE</button>
              <button id="modeOffense" class="btn toggle">We have the ball</button>
            </div>
          </div>
          <div>
            <label class="lbl">Time Remaining (MM:SS)</label>
            <input id="toTime" type="text" inputmode="numeric" class="inp" value="02:00" aria-label="Time remaining" />
          </div>
          <div>
            <label class="lbl">Our Timeouts</label>
            <div class="btn-group">
              <button class="btn toCount" data-val="0">0</button>
              <button class="btn toCount" data-val="1">1</button>
              <button class="btn toCount on" data-val="2">2</button>
              <button class="btn toCount" data-val="3">3</button>
            </div>
          </div>
          <div>
            <label class="lbl">Assumptions</label>
            <div class="assumptions">
              <label>Play clock <input id="playClock" class="inp small" type="number" value="40" /></label>
              <label>Sec per play <input id="secPerPlay" class="inp small" type="number" value="6" /></label>
              <label>Kneel sec <input id="kneelSec" class="inp small" type="number" value="2" /></label>
            </div>
          </div>
        </div>

        <div class="btn-row">
          <button id="calcKneel" class="btn">Kneel-out check (they have ball)</button>
          <button id="calcDefense" class="btn">DEF: When to use TOs</button>
          <button id="useTO" class="btn primary">Use TO (log)</button>
        </div>

        <div id="toOutput" class="output"></div>
      </details>

      <details class="panel">
        <summary>Score Combo Finder</summary>
        <div class="grid two">
          <div>
            <label class="lbl">Target Points</label>
            <input id="targetPts" class="inp" type="number" value="17" min="1" step="1" />
          </div>
          <div>
            <label class="lbl">Max combos shown</label>
            <input id="maxCombos" class="inp" type="number" value="30" min="5" step="5" />
          </div>
        </div>
        <div class="btn-row">
          <button id="findCombos" class="btn">Find Combos</button>
          <button id="copyCombos" class="btn ghost">Copy List</button>
        </div>
        <div id="comboOutput" class="output mono"></div>
      </details>
    </section>
  </main>

  <!-- Scripts -->
  <script src="./app.js" defer></script>
</body>
</html>
